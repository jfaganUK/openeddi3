<!-- view: oe/oe_client/views/view-admin-pool-listing.js -->
<html>
<head>
    <link rel="import" href="/bower_components/polymer/polymer.html">
    <link rel="import" href="/bower_components/paper-button/paper-button.html">
    <link rel="import" href="/bower_components/paper-input/paper-input.html">
    <link rel="import" href="/bower_components/iron-icons/iron-icons.html">
    <link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout.html">

    <dom-module id="oe-admin-sync">
        <style>
            /* TODO(polyup): For speed, consider reworking these styles with .classes
                             and #ids rather than [attributes].
            */
            [layout] {
            @apply(- -layout);
            }

            [layout][vertical] {
            @apply(- -layout-vertical);
            }

            [layout][flex] {
            @apply(- -layout-flex);
            }
        </style>
        <style>
            #container {
                margin: 0.5em auto;
                background: white;
                border: 1px solid rgba(0, 0, 0, 0.15);
                padding: 0.5em 1em 1em;
                position: relative;
                width: 80%;
                max-width: 560px;
                min-width: 256px;
            }

            #newPoolEntry {
                display: none;
            }

            #newSheetButton {
                display: block;
            }

            .poolButton {
                margin-top: 15px;
            }

            .poolListingStatsRow {
                margin-top: 12px;
                border-bottom: 1px solid rgba(0, 0, 0, 0.2);
            }

            .poolListingStatsRow > div:nth-child(1) {
                width: 30%;
                max-width: 240px;
                min-width: 120px;
                word-wrap: normal;
            }

            .poolListingStatsRow > div:nth-child(2) {
                text-align: left;
            }

        </style>
        <template>
        
          <div id="container">
            <h2>OE Admin Sync</h2>
            
            <p>{{message}}<p>
            
            <paper-listbox>
                <template is='dom-repeat' items='{{ records }}'>
                    <paper-item>{{item.id}} </paper-item>
                </template>
            </paper-listbox>
            
            <paper-button disabled$="{{disabled}}" raised="" on-tap="sync" class="start-button">
              <iron-icon icon="add">{{button}}</iron-icon>{{button}}
            </paper-button>
            
            <p>{{localstoragemessage}}<p>
            <paper-button disabled$="{{localstoragebuttondisabled}}" raised="" on-tap="clearLocalStorage" class="start-button">
              <iron-icon icon="add">{{localstoragebutton}}</iron-icon>{{localstoragebutton}}
            </paper-button>
            
          </div> 
                                                                     
        </template>
        
        <script>
        
            //noinspection JSUnusedGlobalSymbols
            Polymer({
                is: 'oe-admin-sync',
                properties: {
                   attrUpdate: {
                        notify: true,
                        observer: 'attrUpdateChanged'
                    },
                  button: {
                    type: String,
                    value: 'Sync Records to Server?',
                    notify: true
                  },
                  disabled: {
                    type: Boolean
                  },
                  message: {
                    type: String,
                    value: '',
                    notify: true
                  },
                  localstoragemessage: {
                    type: String,
                    value: '',
                    notify: true
                  },
                  localstoragebutton: {
                    type: String,
                    value: 'Clear Local Storage?',
                    notify: true
                  },
                 localstoragebuttondisabled: {
                   type: Boolean,
                   value: false
                 }
                },
            _disabledChanged: function(newValue, oldValue) {
               this.toggleClass('disabled', newValue);
            },
            disableButton: function(v, newValue) {
              if (newValue !== 'undefined' ) {
                this.set('disablebutton', newValue);
              }
            },
            // ready: function() {
            // },
            sync: function() {
              app.channels.response.command('sync', this);
            },
            clearLocalStorage: function() {
              app.channels.response.command('clearLocalStorage', this);
            }
            });
        </script>
    </dom-module>